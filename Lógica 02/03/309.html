<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="#">
    </head>

    <body>

        <canvas width="600" height="400"> </canvas>

        <script>

            var tela = document.querySelector('canvas');
            var pincel = tela.getContext('2d');
            
            pincel.fillStyle = 'grey';
            pincel.fillRect(0, 0, 600, 400);
            
            var desenha = false;

            function desenhaCirculo(evento) {
                if(desenha){
                    var x = evento.pageX - tela.offsetLeft;
                    var y = evento.pageY - tela.offsetTop;            
                    console.log(x + ',' + y);
                    
                    pincel.fillStyle = cores[inicial];
                    pincel.beginPath();
                    pincel.arc(x, y, 10, 0, 2 * 3.14);
                    pincel.fill();
                }
            }
            
            var cores = ['blue', 'red', 'green','yellow'];
            var inicial = 0;   
            
            tela.onmousemove = desenhaCirculo;
            
            function mudaCor() {
                inicial++;
                if (inicial>= cores.length){
                    inicial = 0;
                }
                console.log('Funcionou!');
                return false;
            }                    
            
            tela.onmousedown = function() {
                desenha = true;
            };

            tela.onmouseup = function () {
                desenha = false;
            } ;
            
            tela.oncontextmenu = mudaCor;

        </script>
    </body>
</html>